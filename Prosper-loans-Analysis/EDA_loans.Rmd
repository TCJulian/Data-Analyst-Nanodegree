# Exploratory Data Analysis: Prosper Loan Dataset
_by Tyler Julian_
_Last Updated: 3/16/2018_

========================================================

## Abstract

In the finance, everyone is looking at getting the best deal. Best interest rate, best return, low risk and high reward... as both borrowers and lenders, we want it all. This primarily takes form in the interest rate of a loan. Unfortunately, the interest rate that borrowers want and what lenders want do not always line up. Even worse is trying to understand the factors that determine the interest rate to being with. For borrowers, credit score is considered the most popular variable, but what other factors impact the loans? The amount of the loan? Where you live? How much income you have? This project hopes to explore some of these trends in a real-life dataset and reveal the biggest factors that influence a borrower's interest rate.

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load packages

library(dplyr)
library(ggplot2)
library(gridExtra)
library(RColorBrewer)
library(tidyr)
```

```{r echo=FALSE, Load_the_Data}
# link to dataset reference: https://docs.google.com/spreadsheets/d/1gDyi_L4UvIrLTEC6Wri5nbaMmkGmLQBk-Yx3z0XDEtI/edit#gid=0

loans <- read.csv('prosperLoanData.csv')
```

## Data Source

This dataset contains loan data from [_Prosper_](https://www.prosper.com/personal-loans/better-finances/?refac=GoogSearch&refmc=BorGenAcq&refd=cm:SEM-Brand%7C%7Cag:29761763651%7C%7Ckw:prosper%20loans%7C%7Cad:233096998244%7C%7Cdv:c%7C%7Cmt:e%7C%7Cap:1t1&gclid=EAIaIQobChMI9_O45P3z2AIV2AuBCh1i3QacEAAYASAAEgItg_D_BwE&flags=BetterFinancesLandingPage:WithoutLoanAmount), an online marketplace that brings investors and borrowers together to fund small to medium sized loans. Borrowers can get loans up to $35,000, with the interest rates set by Propser. Lenders get to choose what loans they want to fund, with higher risk loans providing a higher return.

The dataset can be downloaded from this project's [GitHub repository](https://github.com/TCJulian/Data-Analyst-Nanodegree/tree/master/Prosper-loans-Analysis).

## Initial Exploration

A logical start to understanding this dataset would be to look at its shape and variables.

```{r, echo=FALSE, Shape_loans}
dim(loans)
```

The dataset contains 113,937 observations from 81 different variables.

Let's look at a sample of those variables:

```{r, echo=FALSE, Variables_loans}
head(colnames(loans), 10)
```

There are a multitude variables in this dataset, some of whose meaning may not be intuitive at first glance. This [reference](https://docs.google.com/spreadsheets/d/1gDyi_L4UvIrLTEC6Wri5nbaMmkGmLQBk-Yx3z0XDEtI/edit#gid=0), adapted from the _Prosper_ API, provides context to each of the variables. 

## Univariate Analysis

### Borrower Interest Rate

One of most important variables for both a borrower and a lender is the interest rate of the loan. The interest rate is ultimately set by _Prosper_ and is decided based upon by a variety of variables.

```{r echo=FALSE, BorrowerRate_Histogram}

ggplot(loans, 
       aes(x = BorrowerRate * 100)) + 
  geom_histogram(binwidth = 1, 
                 fill = "#598BF7", 
                 color = "black") +
  labs(x = "Borrower Interest Rate (%)", 
       y = "Count",
       title = "Borrower Interest Rate Histogram")
```

The interest rate curve seems to be slightly right skewed, with an abnormal spike at 32%. This could be because of overlapping binwidths. Lets graph `BorrowerRate` again, but with 0.5 binwidths to investigate:

```{r echo=FALSE, BorrowerRate_Investigate}

ggplot(loans, 
       aes(x = BorrowerRate * 100)) + 
  geom_histogram(binwidth = 0.5, 
                 fill = "#598BF7", 
                 color = "black") +
  labs(x = "Borrower Interest Rate (%)", 
       y = "Count", 
       title = "Borrower Interest Rate Histogram (bw = 0.5)")
```

Unfortunately, it seems binwidth is not the answer. 32% still has an extremely high appearance count. At the moment, there appears to be no answer as to why this rate occurs so frequently. One option would be to explore a subset of the dataset that only had 32% interest rate users and compare them with the entire population for differences. However, that is beyond the scope of this analysis, as there are other variables to explore.

### Average Credit Score

As one of the most well known indicators of an individual's financial credibility, Credit Score is the most basic requirement for getting a loan. 

This dataset does not provide a singular credit score, but rather a range. The two variables, `CreditScoreRangeLower` and `CreditScoreRangeUpper`, store the upper and lower bounds of a user's credit score. To visualize the data properly, the two ranges need to be combined into an average. The newly created variable will be named `CreditScoreAverage`.

```{r, echo=FALSE, warning=FALSE, Create_CreditScoreAverage}
# Create average credit score column in dataset
loans <- mutate(loans, 
                CreditScoreAverage = round((CreditScoreRangeLower + 
                                            CreditScoreRangeUpper) / 2))
summary(loans$CreditScoreAverage)
```

With a mean of 695.6 and a median of 690, the central tendency of the distribution seems to be consistent. There are 591 NA's in the data and the 1st and 3rd quartiles are within expectations. However, the minimum value seems way off the charts in terms of its distance from the rest of the data. Let's plot the data to get a better understanding of its shape.

```{r, echo=FALSE, message=FALSE, AvgCreditScore_Histogram}
# Initial plot with low outliers and no NAs
ggplot(data = subset(loans, !is.na(loans$CreditScoreAverage)), 
       aes(x = CreditScoreAverage)) +
  geom_histogram(fill = "#598BF7", 
                 color = "black") +
  labs(x = "Average Credit Score", 
       y = "Count",
       title = "Average Credit Score Histogram")
```

There seems to be a handful of credit scores close to zero. Because these scores are abysmally low and are no where near the rest of the distribution, they are marked as outliers. With this new knowledge, the data is plotted again with smaller binwidths, better breaks, and without the outliers.

```{r echo=FALSE, warning=FALSE, AvgCreditScore_Outliers}
# Plot without outlier and proper breaks
ggplot(data = subset(loans, !is.na(loans$CreditScoreAverage)), 
       aes(x = CreditScoreAverage)) +
  geom_histogram(binwidth = 20, 
                 fill = "#598BF7", 
                 color = "black") +
  scale_x_continuous(limits = c(440, 900), 
                     breaks = c(seq(440, 900, 40))) +
  labs(x = "Average Credit Score", 
       y = "Count",
       title = "Average Credit Score Histogram")
```

After those adjustments, the data now has a semi-bell curve. From 680 to 900, the shape of the plot is almost perfect in terms of being normal. From 440 to 680, it has more deviation, but still follows a normal shape.

This plot follows the initial intuition about credit score. It makes sense that most people fall right in the middle of the ranges, with a majority of the scores floating around the average score of 700. You have a smaller subset of people that maybe haven't been up to date on payments or have defaulted, leading to very poor scores. There is also another subset of people who are maybe very diligent about their payments, resulting in high scores. 

### Income

Many lenders also look at a borrower's income when determining whether to fund a loan. A borrower with more disposable income should be more likely to pay their monthly payments on a loan and are thus considered a less risky investment. 

Income for borrowers is stored in the variable `IncomeRange`:

```{r, echo=FALSE, IncomeRange_str}
str(loans$IncomeRange)
```

`str(IncomeRange)` shows that income is factored into levels:

```{r, echo=FALSE, IncomeRange_levels}
levels(loans$IncomeRange)
```

Two things to note:

1. The levels are not ordered.
2. Some of the levels can be combined.  
  
For this analysis, the values need to be be ordered from least to greatest. This will provide a much more organized plot and move the data type from nominal to ordinal. The levels `Not employed` and `$0`, while still technically having different meanings, both represent that the buyer does not have a primary career that provides income. As a result, these two levels be combined to reduce the complexity of the variable.
  
```{r, echo=FALSE, Income_relevel}
# Order levels
loans$IncomeRange <- factor(loans$IncomeRange, 
                            levels = c("Not displayed", "Not employed", 
                                       "$0", "$1-24,999", 
                                       "$25,000-49,999", "$50,000-74,999", 
                                       "$75,000-99,999", "$100,000+"),
                            ordered = TRUE)

# Combine "Not employed" with "$0" 
levels(loans$IncomeRange) <- c("Not displayed", "$0", 
                               "$0", "$1-24,999", 
                               "$25,000-49,999", "$50,000-74,999", 
                               "$75,000-99,999", "$100,000+")

# Return new levels
levels(loans$IncomeRange)
```

Now that the levels have been properly transformed, the non-NA data can be visualized as a barchart:

```{r, echo=FALSE, Income_Bar}
# Plot barchart without NAs
ggplot(data = subset(loans, loans$IncomeRange != "Not displayed"),
       aes(x = IncomeRange)) +
  geom_bar(fill = "#598BF7",
           color = "black") +
  labs(x = "Income Range ($)",
       y = "Count", 
       title = "Income Ranges of Borrowers")
```

Or as a table:

```{r, echo=FALSE, Income_table}
table(loans$IncomeRange)
```

`IncomeRange` shows that most borrowers have income that falls within two bins: `$25,000-49,999` and `$50,000-74,999`. There are more borrowers that fall above these ranges than below them. This might suggest that borrowers with higher reported incomes are more likely to take out a loan than those with lower reported incomes. More exploration combined with other variables is required to validate this theory.

### Debt to Income Ratio

Debt to income ratio, stored as `DebtToIncomeRatio`, is exactly what it sounds like: a borrower's debt divided by their current income at the time the credit profile was pulled. 

```{r, echo=FALSE, DebtIncomeSummary}
str(loans$DebtToIncomeRatio)
summary(loans$DebtToIncomeRatio)
```

A quick look at the summary and structure of the variable shows that the median ratio is 0.22, while the mean is a bit higher at 0.276. The maximum is incredibly high, showing a debt to income ratio of over 1000%. A quick look at the variable reference page shows that 10.01 is the highest ratio able to be recorded.

In order to deal with these potential outliers, the top 1% of values is excluded from the resulting plot:

```{r echo=FALSE, warning=FALSE, DebtIncome_Histogram}
ggplot(loans, aes(x = DebtToIncomeRatio)) +
  geom_histogram(binwidth = 0.025, 
                 fill = "#598BF7", 
                 color = "black") +
  scale_y_continuous(breaks = c(seq(0, 11000, 1000))) +
  scale_x_continuous(breaks = c(seq(0, 1, 0.1)), 
                     limits = c(0, quantile(loans$DebtToIncomeRatio, 
                                            probs = 0.99, 
                                            na.rm = TRUE))) +
  labs(x = "Debt/Income Ratio", 
       y = "Count", 
       title = "Debt to Income Ratio Histogram")
  
```

The distribution of debt to income seems to be slightly right skewed with a long tail. There are small peaks at all of the 0.5 breaks, which might suggest that the data was rounded upon retrieval. The right skew would explain the higher mean than the median. It makes intuitive sense that the majority of individuals have a low debt to income ratio on average, with the count decreasing as the debt to income ratio climbs higher. It becomes increasingly hard to live as the debt to income ratio increases.

### Term Length

Term length is the length of time the loan has until it has to be paid off. A longer term length means the borrowers have to pay less per month, but perhaps more interest over the life of the loan.

```{r echo=FALSE, TermLength_Unique}
unique(loans$Term)
```

Looking at only the unique values of `Term`, the only terms offered by _Prosper_ are 12, 36, and 60 term lengths. The API shows that this variable is measured in months. 

The `Term` variable currently has no levels, but can be easily factored since there are so few unique values. Once factored, `Term` can be displayed as a table.

```{r, echo=FALSE, TermLength_Factored}
loans$Term <- factor(loans$Term, levels = c(12, 36, 60), ordered = TRUE)
```

```{r, echo=FALSE, TermLength_Table}
table(loans$Term)
```

```{r echo=FALSE, TermLength_Bar}
ggplot(data = loans, aes(x = Term)) +
  geom_bar(fill = "#598BF7", 
           color = "black") +
  labs(x = "Term Length (months)", 
       y = "Count", 
       title = "Term Length")
```

It appears that the vast majority of loans have a term length of 36, accounting for 77% of all loans. Term lengths of 60 make up most of the remaining loans, with 12 month terms only accounting for 1.4% of all loans.

### Estimated Return

For lenders, how much return they receive from their investment is a very important factor when choosing which loans to fund. _Prosper_ has a variable for this value, `EstimatedReturn`, displayed as a percentage. This variable is calculated by taking the difference from a loan's `EstimatedEffectiveReturn` and `EstimatedLoss`. Both of these variables can be found in detail from the variable [reference page](https://docs.google.com/spreadsheets/d/1gDyi_L4UvIrLTEC6Wri5nbaMmkGmLQBk-Yx3z0XDEtI/edit#gid=0).

```{r, echo=FALSE, EstimatedReturn_Summary}
summary(loans$EstimatedReturn)
```

A summary shows that the average expected return is around 9.5%. This is slightly higher than [6.7% average total return](https://www.prosper.com/invest) listed on their website. There are also a lot of NAs for this particular variable, probably attributable to the fact that this variable wasn't be tracked until the start of July 2009.

```{r, echo=FALSE, warning=FALSE, EstimatedReturn_Histogram}

ggplot(loans, aes(x = EstimatedReturn * 100)) +
  geom_histogram(binwidth = 1, 
                 fill = "#598BF7", 
                 color = "black") +
  scale_x_continuous(limits = c(-10, 30), 
                     breaks = c(seq(-10, 30, 5))) +
  labs(x = "Estimated Return (%)", 
       y = "Count)", 
       title = "Estimated Return Histogram")
```

The distribution appears to be approximately normally distributed. However, some of the values seem to have very high counts, which makes it much harder to see the data in the tails. By scaling the y-axis by square roots, the tails should be easier to see.

```{r echo=FALSE, warning=FALSE, EstimatedReturn_yscaled}
ggplot(loans, aes(x = EstimatedReturn * 100)) +
  geom_histogram(binwidth = 1, 
                 fill = "#598BF7", 
                 color = "black") +
  scale_x_continuous(limits = c(-10, 30), 
                     breaks = c(seq(-10, 30, 5))) +
  scale_y_sqrt(breaks = c(100, 1000, 2500, 5000, 10000, 12000)) +
  labs(x = "Estimated Return (%)", 
       y = "sqrt(Count)", 
       title = "Estimated Return Histogram")
```

Now the tails are much easier to see. The distribution does indeed remain approximately normally distributed, with the peak right around the mean and median. Most of the estimated returns are positive. 

```{r, echo=FALSE, EstimatedReturn_positive }
length(loans$EstimatedReturn[loans$EstimatedReturn > 0]) / length(loans$EstimatedReturn)
```

In fact, over 99% of all loans through _Prosper_ have a positive estimated return. From a lender standpoint, this is excellent news. However, estimations do not always live up to reality.

### Borrower State

`BorrowerState` is exactly what it sounds like: the state the borrower currently resides in when acquiring the loan.

```{r, echo=FALSE, BorrowerState_str}
str(loans$BorrowerState)
```

The structure of the variable shows that each state is treated as its own level. 

```{r echo=FALSE, BorrowerState_Bar, fig.width = 12, fig.height=4}
ggplot(subset(loans, loans$BorrowerState != ''), (aes(x = BorrowerState))) +
  geom_bar()
```

Quickly plotting the variable shows that the levels need to be reordered if they are going to be visualised in a bar chart.

```{r, echo=FALSE, BorrowerState_Order}
loans$BorrowerState <- factor(loans$BorrowerState, level = names(sort(table(loans$BorrowerState), decreasing = TRUE)))
```

```{r echo=FALSE, BorrowerState_OrderedBar, fig.width = 12, fig.height=4}
ggplot(data = subset(loans, loans$BorrowerState != ''), 
       (aes(x = BorrowerState))) +
  geom_bar(fill = "#598BF7", 
           color = "black") +
  labs(x = "States", 
       y = "Count", 
       title = "Borrowers by State")
```

California appears to have much more borrowers than any other state. This is understandable sense [_Prosper_ was founded in San Francisco California](https://www.prosper.com/plp/about/contact-us/). The states following California--Texas, New York, Florida--are also metro hubs with large tech industries.

### Credit Grade and Prosper Rating

In an effort to make investments easier to assess for potential investors, _Prosper_ created the "CreditGrade" scoring system. This was eventually replaced with the "Prosper Rating" system in 2009, which is very similiar to CreditGrade. In order toanalyze these variables throughout all of the data, these two variables need to be combined into one. 

```{r, echo=FALSE, Rating_levels}
levels(loans$CreditGrade)
levels(loans$ProsperRating..Alpha.)
```
 
Looking at the levels of the two variables, Credit Grade has an extra level called `NC`. The rest of both levels are the same. It is also important to note that the variables have no `NA` values. Rather, they are input as "". 
 
```{r, echo=FALSE, Rating_summary }
summary(loans$CreditGrade)
summary(loans$ProsperRating..Alpha.)
```

In order to manipulate these variables effectively, the "" values need to be substituted with `NA`. Once the "" values transformed into NA's, `ProsperRatings` and `CreditGrade` can be combined into a single column and ordered from the lowest ratings to the highest rating.
 
```{r, echo=FALSE, Rating_combine}
# Remove NAs from CreditGrade and ProsperRating
loans$ProsperRating..Alpha.[loans$ProsperRating..Alpha. == ""] <- NA
loans$CreditGrade[loans$CreditGrade == ""] <- NA

# Combining Credit Grade and Prosper Rating into loans$ratings
loans$ratings <- loans$CreditGrade
loans$ratings[!is.na(loans$ProsperRating..Alpha.)] <- loans$ProsperRating..Alpha.[!is.na(loans$ProsperRating..Alpha.)]

loans$ratings <- factor(loans$ratings, 
                        levels = c('NC', 'HR', 'E', 'D', 'C', 'B', 'A', 'AA'))
```

```{r, echo=FALSE, Ratings_Bar}
ggplot(subset(loans, !is.na(loans$ratings) & loans$ratings != "NC"), 
       aes(x = ratings)) +
  geom_bar(fill = "#598BF7",
           color = "black") +
  labs(x = "Credit Rating", 
       y = "Count", 
       title = "Credit Rating Bar Chart")
```

The plot for combined Credit rating turns out very well. The data appears normally distributed with the `C` rating having the most values. The highest rating, `AA`, has the least amount of values.

### Loan Status

Each loan has a loan status associated with it. This determines whether the current loan has been completed, whether it is late on its payments, or whether it has been defaulted on.

```{r echo=FALSE, LoanStatus_Levels}
levels(loans$LoanStatus)
```

Currently, there is a lot of detail in the levels. However, the granularity of the data can be reduces by combining some of the levels. More specifically, some of the `Past Due` bins can be combined. `FinalPaymentInProgress` loans can also be lumped with `Current` loans.

Once the categorical bins have been combined, the levels can also be ordered from the most favorable status to the least favorable status.

```{r echo=FALSE, LoanStatus_Relevel}
# Combine "Past Due" levels
levels(loans$LoanStatus) <- c("Cancelled", "Chargedoff", "Completed", "Current",
                              "Defaulted", "Current", 
                              "PastDue (>30 days)", "PastDue (1-30 days)", 
                              "PastDue (1-30 days)", "PastDue (>30 days)", 
                              "PastDue (>30 days)", "PastDue (>30 days)")

loans$LoanStatus <- factor(loans$LoanStatus, 
                            levels = c("Completed", "Current", "PastDue (1-30 days)", "PastDue (>30 days)", "Defaulted", "Chargedoff", "Cancelled"))
```

```{r echo=FALSE, LoanStatus_Histogram, fig.width=8}
ggplot(data = subset(loans, loans$LoanStatus != 'Cancelled'), 
       aes(x = LoanStatus)) +
  geom_bar(fill = "#598BF7",
           color = "black") +
  labs(x = "Status", 
       y = "Count", 
       title = "Loan Status Histogram")
```

```{r echo=FALSE, LoanStatus_Table}
table(loans$LoanStatus)
```

A vast majority of the loans are either completed or active with up-to-date payments. However, there is also a large minority of loans that either go into default or are chargedoff. These negative results account for approximately 15% of all loans from Prosperity.

### Loan Amount

Loan amount is the total amount of cash given to the borrower once the loan is approved. Loans start at \$1,000 and go up to a maximum of \$35,000.

```{r echo=FALSE, LoanAmount_Histogram}
ggplot(data = loans, aes(x = LoanOriginalAmount)) +
  geom_histogram(binwidth = 1000,
                 fill = "#598BF7",
                 color = "black") +
  scale_x_continuous(breaks = c(seq(0, 35000, 5000))) +
  labs(x = "Loan Amount ($)",
       y = "Count",
       title = "Loan Amount Histogram")
```

```{r echo=FALSE, LoanAmount_summary}
summary(loans$LoanOriginalAmount)
```

The loan amount data is right skewed with multi-modal peaks. These peaks are all at the \$5,000 increments, which is probably attributable to the fact most people get loans at even amounts. 75% of the loans are $12,000 or less, with only a handful of loans at the maximum amount of \$35,000.

### Employment Status

Another common metric requested from lenders is the borrower's current employment status. Employment status gives the lender a gauge on the potential cashflow the borrower currently has. More cashflow usually represents a safer loan.

```{r, echo=FALSE, EmploymentStatus_levels}
levels(loans$EmploymentStatus)
```

Currently, the levels are not ordered and are listed nominally. `Not available` and `""` basically represent the same idea and can be combined.

To better analyse the variable, the levels will be ppoperly ordered and the two levels mentioned earlier will be combined.

```{r echo=FALSE, EmploymentStatus_relevel}
levels(loans$EmploymentStatus) <- c("Not available", "Employed", "Full-time", 
                                    "Not available", "Not employed", "Other", 
                                    "Part-time", "Retired", "Self-employed")

loans$EmploymentStatus <- factor(loans$EmploymentStatus, 
                                 levels = c("Employed", "Full-time", 
                                            "Part-time", "Self-employed",
                                            "Retired", "Not employed",
                                            "Other", "Not available"))
```

```{r echo=FALSE, EmploymentStatus_Bar}
ggplot(data = subset(loans, loans$EmploymentStatus != "Not available"),
       aes(x = EmploymentStatus)) +
  geom_bar(fill = "#598BF7",
           color = "black") +
  labs(x = "Employment Status",
      y = "Count",
      title = "Employment Status")
```

Most borrowers are employed in some manner. Very few report being unemployed.

### Employment Duration

Along with employment status, lenders also consider the borrower's employment duration. Longer durations usually signify more stable income, and thus a safer investment.

```{r, echo=FALSE, EmploymentStatusDuration_summary}
summary(loans$EmploymentStatusDuration)
```

A summary of the variable as well as the _Prosper_ API confirm that `EmploymentStatusDuration` is measured in months. The variable will be viewed in years for the following plots, as years are much easier to visualize and understand.

```{r echo=FALSE, EmploymentStatusDuration1}
ggplot(data = subset(loans, !is.na(loans$EmploymentStatusDuration)), 
       aes(x = EmploymentStatusDuration / 12)) +
  geom_histogram(binwidth = 1,
                 fill = "#598BF7",
                 color = "black") +
  scale_x_continuous(breaks = c(seq(0, 65, 5))) +
  labs(x = "Number of Years Employed",
       y = "Count", 
       title = "Employment Duration Histogram")
```
```{r echo=FALSE, EmploymentStatusDuration2}
summary(loans$EmploymentStatusDuration / 12)
```

The initial plot shows that the data is right skewed and unimodal. There is a long tail with some values way beyond the 3rd quartile. 50% of borrowers have employment durations between two and five 1/2 years.

### Summary of Univariate Analysis

The dataset consists of 83 variables with 113,937 observations.

The variables of interest in this analysis are:

  1. Interest Rate
  2. Average Credit Score
  3. Income
  4. Debt/Income Ratio
  5. Term Length
  6. Estimated Return
  7. Borrower State
  8. Borrower Rating
  9. Loan Status
  10. Loan Amount
  11. Employment Status
  12. Employment Duration
  
Some of the more important observations:

 * The interest rate distribution was slightly right skewed, with a abnormal peak at 32%.
 * The average credit score was 690.
 * Most loans had terms of 32 months.
 * Borrower ratings was normally distributed, with most loans being rated as a 'C'.
 * The average borrower was employed for 5.5 years and made between /$50,000 and /$75,000.
  
The main feature of interest in this dataset is the borrower's interest rate. Remember that the goal is to make a model that can predict the interest rate of Prosper loan, given some list of variables.

There are several variables that can be explored further that could potentially predict the interest rate a borrower has. Obviously Credit Score will be used. Income, Loan Amount, Employment Duration/Status, and Debt/Income Ratio all might be correlated with interest rate as well, and will definitely appear in the bivariate analysis. The Borrower Rating is another interesting variable to explore, especially with some of the other supporting variables.

In this analysis, there were also several variables that were adapted so they could be properly used. Income, Term Length, LoanStatus, Borrower State, and Employment status all had thier levels added, combined, or reordered. One new variable, `Rating`, was recreated entirely using the two other rating variables.  

# Bivariate Exploration
Interest rate vs. Average Credit Score
Interest rate vs. Borrower Rating
Interest rate vs. Income
Interest rate vs. Debt/Income Ratio
Interest rate vs. Employment Status
Interest rate vs. Employment Duration
Loan Status vs. Estimated Return
Loan Status vs. Borrower Rating

### Interest Rate vs. Loan Amount
```{r echo=FALSE, LoanAmount_BorrowerRate}
ggplot(loans, aes(x = LoanOriginalAmount, y = BorrowerRate)) +
  geom_point(alpha = 0.25) +
  scale_x_sqrt(breaks = c(seq(1000, 36000, 5000)))
```

### Interest Rate vs. Average Credit Score
```{r echo=FALSE, AvgCreditScore_BorrowerRate}
ggplot(loans, aes(x = CreditScoreAverage, y = BorrowerRate)) +
  geom_jitter(alpha = 0.05, size = .75) +
  scale_x_continuous(limits = c(360, 900), breaks = c(seq(360, 920, 40))) +
  ylim(0, 0.4) +
  labs(x = 'Average Credit Score', 
       y = 'Interest Rate',
       title = "Interest Rate by Average Credit Score")
```

### Interest Rate vs. Rating
```{r echo=FALSE, Rating_BorrowerRate}
ggplot(subset(loans, !is.na(loans$ratings) & loans$ratings != "NC"), 
       aes(x = ratings, y = BorrowerRate)) + 
  geom_boxplot(alpha = 0.10)
```

### Interest Rate vs. Income
```{r echo=FALSE, InterestRate_Income}
ggplot(data = loans,
       aes(x = IncomeRange, y = BorrowerRate)) +
  geom_boxplot()
```

### Interest Rate vs. Debt/Income Ratio
```{r echo=FALSE, InterestRate_DebtIncomeRatio}
ggplot(data = loans,
       aes(x = DebtToIncomeRatio, y = BorrowerRate)) +
  geom_jitter(alpha = 0.1, size = .5)
```

### Interest Rate vs. Employment Status
```{r echo=FALSE, InterestRate_EmploymentStatus}
ggplot(data = loans,
       aes(x = EmploymentStatus, y = BorrowerRate)) +
  geom_boxplot()
```

### Interest Rate vs. Employment Duration
```{r echo=FALSE, InterestRate_EmploymentDuration}
ggplot(data = loans,
       aes(x = EmploymentStatusDuration / 12, y = BorrowerRate)) +
  geom_point(alpha = 0.2, size = .5)
```

### Credit Rating vs. Credit Score
```{r echo=FALSE, Rating_AvgCreditScore}
ggplot(subset(loans, !is.na(loans$ratings) & loans$ratings != "NC"), aes(x = ratings, y = CreditScoreAverage)) + 
  geom_boxplot() +
  ylim(250, 900)
```

### Loan Status vs. Credit Rating
```{r echo=FALSE, Rating_LoanStatus, fig.width=10}
ggplot(data = subset(loans, ratings != 'NC' & LoanStatus != 'Cancelled'),
       aes(x = ratings)) + 
  geom_bar() +
    facet_grid(. ~ LoanStatus)
```

### Estimated Return vs. Credit Rating
```{r echo=FALSE, Return_AvgCreditScore, fig.width=10}
ggplot(data = subset(loans, ratings != 'NC' & LoanStatus != 'Cancelled'),
       aes(x = ratings)) + 
  geom_bar() +
    facet_grid(. ~ LoanStatus)
```

# Bivariate Reflection

> **Tip**: As before, summarize what you found in your bivariate explorations
here. Use the questions below to guide your discussion.

### Talk about some of the relationships you observed in this part of the \
investigation. How did the feature(s) of interest vary with other features in \
the dataset?

### Did you observe any interesting relationships between the other features \
(not the main feature(s) of interest)?

### What was the strongest relationship you found?


# Multivariate Plots Section

> **Tip**: Now it's time to put everything together. Based on what you found in
the bivariate plots section, create a few multivariate plots to investigate
more complex interactions between variables. Make sure that the plots that you
create here are justified by the plots you explored in the previous section. If
you plan on creating any mathematical models, this is the section where you
will do that.

### Loan Amount vs Borrower Rate by Credit Grade
```{r echo=FALSE, LoanAmount_BorrowerRate_Rating, fig.height=5, fig.width=10}
ggplot(data = subset(loans, loans$ProsperRating..Alpha. != ""), 
       aes(x = LoanOriginalAmount, y = BorrowerRate * 100, color = ratings)) +
  geom_point(alpha = 0.5) +
  scale_x_sqrt(breaks = c(seq(1000, 36000, 5000))) + 
  scale_color_brewer(palette = "RdBu") + 
  labs(x = "Original Loan Amount ($)", y = "Borrower Interest Rate (%)") +
  theme(panel.background = element_rect(fill = 'dark grey'))
```

### Average Credit Score vs Borrower Rate by ?
```{r echo=FALSE, Multivariate_Plots}

```


# Multivariate Analysis

### Talk about some of the relationships you observed in this part of the \
investigation. Were there features that strengthened each other in terms of \
looking at your feature(s) of interest?

### Were there any interesting or surprising interactions between features?

### OPTIONAL: Did you create any models with your dataset? Discuss the \
strengths and limitations of your model.

------

# Final Plots and Summary

> **Tip**: You've done a lot of exploration and have built up an understanding
of the structure of and relationships between the variables in your dataset.
Here, you will select three plots from all of your previous exploration to
present here as a summary of some of your most interesting findings. Make sure
that you have refined your selected plots for good titling, axis labels (with
units), and good aesthetic choices (e.g. color, transparency). After each plot,
make sure you justify why you chose each plot by describing what it shows.

### Plot One
```{r echo=FALSE, Plot_One}

```

### Description One


### Plot Two
```{r echo=FALSE, Plot_Two}

```

### Description Two


### Plot Three
```{r echo=FALSE, Plot_Three}

```

### Description Three

------

# Reflection

> **Tip**: Here's the final step! Reflect on the exploration you performed and
the insights you found. What were some of the struggles that you went through?
What went well? What was surprising? Make sure you include an insight into
future work that could be done with the dataset.

> **Tip**: Don't forget to remove this, and the other **Tip** sections before
saving your final work and knitting the final report!